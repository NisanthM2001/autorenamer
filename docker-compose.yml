version: '3.8'

services:
  bot:
    build: .
    container_name: channel-file-processor-bot
    environment:
      - API_ID=${API_ID}
      - API_HASH=${API_HASH}
      - BOT_TOKEN=${BOT_TOKEN}
      - OWNER_ID=${OWNER_ID}
      - DATABASE_URL=${DATABASE_URL}
    volumes:
      - ./downloads:/app/downloads
      - ./thumbnails:/app/thumbnails
    restart: unless-stopped

  postgres:
    image: postgres:15-alpine
    container_name: bot-postgres
    environment:
      - POSTGRES_DB=${PGDATABASE}
      - POSTGRES_USER=${PGUSER}
      - POSTGRES_PASSWORD=${PGPASSWORD}
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    restart: unless-stopped

volumes:
  postgres_data:
